{
    "size": 10,
    "sort": ["_score",
             {"start_time": "desc"}],
    "query": {
        "function_score": {
            "query": {
                "bool": {
                    "filter": [
                        {"range": {"log_level": {"gte": 40000}}},
                        {"exists": {"field": "issue_type"}},
                        {"term": {"is_merged": false}}
                    ],
                    "must_not": [
                        {"wildcard": {"issue_type": "ti*"}},
                        {"wildcard": {"issue_type": "nd*"}},
                        {"term": {"test_item": "123"}}
                    ],
                    "must": [
                        {"term": {
                            "launch_id": 12
                        }},
                        {"more_like_this": {
                            "fields":               ["message"],
                            "like":                 "hello world",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "5<80%",
                            "max_query_terms":      50,
                            "boost":                4.0
                        }}
                    ],
                    "should": [
                        {"term": {
                            "test_case_hash": {
                                "value": 1,
                                "boost": 3
                            }
                        }},
                        {"term": {
                            "is_auto_analyzed": {
                                "value": "false",
                                "boost": 10
                            }
                        }},
                        {"more_like_this": {
                            "fields":               ["detected_message"],
                            "like":                 "hello world",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "5<80%",
                            "max_query_terms":      50,
                            "boost":                2.0
                        }},
                        {"more_like_this": {
                            "fields":               ["stacktrace"],
                            "like":                 "",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "5<60%",
                            "max_query_terms":      50,
                            "boost":                1.0
                        }},
                        {"more_like_this": {
                            "fields":               ["merged_small_logs"],
                            "like":                 "",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "5<80%",
                            "max_query_terms":      50,
                            "boost":                0.5
                        }},
                        {"more_like_this": {
                            "fields":               ["detected_message_without_params_extended"],
                            "like":                 "hello world",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "1",
                            "max_query_terms":      50,
                            "boost":                2.0
                        }},
                        {"more_like_this": {
                            "fields":               ["only_numbers"],
                            "like":                 "1",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "1",
                            "max_query_terms":      50,
                            "boost":                2.0
                        }},
                        {"more_like_this": {
                            "fields":               ["test_item_name"],
                            "like":                 "test item Common Query",
                            "min_doc_freq":         1,
                            "min_term_freq":        1,
                            "minimum_should_match": "1",
                            "max_query_terms":      50,
                            "boost":                2.0
                        }}
                    ]
                }
            },
            "functions": [
                {
                    "exp": {
                        "start_time": {
                            "origin": "2021-08-30 08:11:23",
                            "scale": "7d",
                            "offset": "1d",
                            "decay": 0.95
                        }
                    }
                },
                {
                    "script_score": {"script": {"source": "0.6"}}
                }],
            "score_mode": "max",
            "boost_mode": "multiply"
        }
    }
}
